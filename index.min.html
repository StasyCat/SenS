<!DOCTYPE html>
<html>
<head><title>SenS!</title><meta charset="UTF-8"><meta name="description" content="いわゆる音ゲーです"><meta name="viewport" content="width=device-width, initial-scale=1,minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"><meta name="author" content="Masakun Kai"><link href="https://fonts.googleapis.com/earlyaccess/notosansjapanese.css" id="gwebfont1"/><link href="https://fonts.googleapis.com/css?family=Open+Sans|Open+Sans+Condensed:300|Quicksand:300|Raleway:200" id="gwebfont2"/><style>body{background-image:url(background.jpg)}body>*{background:rgba(0,0,0,.7)}#body>*{box-shadow:0 0 1em #000}*{margin:0;padding:0}#inputs>:not(:first-child),.mBoth,.mL{margin-left:1em}body{background-color:#000;color:#CCC;font-family:"Open Sans",'Noto Sans Japanese',Roboto,"Yu Gothic","Meiryo UI",sans-serif;overflow:hidden}#head,.head{font-family:Raleway,'Noto Sans Japanese',Roboto,"Yu Gothic","Meiryo UI",sans-serif}#body>*,.fullH,body,html{height:100%}#body>*,.fullW,body,html{width:100%}#body>*,#menubody>*{position:absolute}#body,#menubody{position:relative}.cH,.cV{display:flex}.cV{flex-direction:column}.cH{flex-direction:row}.scrollY{overflow-y:auto}.scrollX{overflow-x:auto}.mBoth{margin-right:1em}.grow{flex-grow:1}.listV>*{display:block;margin-bottom:.2em}#filter,#head{margin-bottom:.5em}#head{font-size:5vh;vertical-align:middle;box-shadow:0 -10px 15px 11px #FFF}#body>*{background-color:rgba(0,0,0,.5)}#song{text-align:left;min-width:3em}#next,#prev,#title{text-align:center;padding-bottom:.5em;max-height:5vh}#song,#title{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#next,#prev{font-weight:700;min-width:1em;border-radius:2em}#inputs>*,#name,#songlist>*,#tags>*{font-size:1.5em}#inputs{margin-bottom:1em}#tags{display:inline;overflow-x:scroll;border-collapse:separate;border-spacing:.5em 0}#tags>*{display:table-cell;margin-right:.5em}.rank{margin-right:1em;flex-basis:3em;flex-shrink:1}.score,.time{margin-right:1em;flex-basis:5em;flex-shrink:1}.name{flex-grow:1}@keyframes active-btn{from{color:#FFD}to{color:#BB4}}@keyframes deactive-btn{from,to{color:#666}}@keyframes unselected-btn{from{color:#990}to{color:#770}}@keyframes selected-btn{from{color:#FFD;text-shadow:0 0 7px #FC0}to{color:#BB4;text-shadow:0 0 5px #FFF}}@keyframes fading{from{opacity:1}to{opacity:0}}@keyframes blink{from,to{background-color:transparent}30%{background-color:#EED}}#next.activebtn,#prev.activebtn{animation-direction:normal}#gameback,.activebtn{user-select:none}#min,#name,#song,#songlist>*,#speed,.activebtn{animation:active-btn .75s ease-in-out alternate infinite backwards;cursor:pointer;user-select:none}.deactivebtn,.selbtn{animation:deactive-btn 1s ease-in-out alternate infinite backwards;cursor:default;user-select:none}#tags>*,.selbtn,.unselbtn{cursor:pointer;user-select:none}.selbtn{animation:selected-btn .75s ease-in-out alternate infinite backwards!important}#tags>*,.unselbtn{animation:unselected-btn 1s ease-in-out alternate infinite backwards}.fading1{animation:fading .5s ease-in-out normal forwards}.fading2{opacity:0;visibility:hidden}.fading3{animation:fading .2s ease-in-out reverse backwards}.blink{animation:blink 1.4s ease-in-out infinite backwards}::-webkit-scrollbar{overflow:hidden;width:.2cm;background:#444;border-radius:.2em}::-webkit-scrollbar:horizontal{height:.2cm}::-webkit-scrollbar-button{display:none}::-webkit-scrollbar-thumb{overflow:hidden;border-radius:.2em;background:#BBB}::-webkit-scrollbar-corner{overflow:hidden;border-radius:.2em;background:0 0}</style></head><body oncontextmenu="return false" touchmove="function(e){e.preventDefault();}" onload="document.getElementById('gwebfont1').rel='stylesheet';document.getElementById('gwebfont2').rel='stylesheet';"><div class="fullH fullW cV"><div class="fullW cH" id="head"><span class="fullH deactivebtn" id="prev">&lt;</span><span class="fullH grow" id="title">SenS!</span><span class="fullH deactivebtn" id="next">&gt;</span></div><div class="cV grow mBoth" id="body"><div class="cV fading2" id="fin"><div id="detail-fin"><span id="fin-text">Fin!</span></div><div id="name" can="_">Enter your name...</div><div class="grow scrollY" id="ranking"><ul class="listV" id="rankinglist"></ul></div></div><div style="text-align: center;" class="fading2" id="gameback"><div style="top: 50%;font-size: 10vmin;position: relative;margin-top: -5vmin;" id="score"></div></div><div class="fading2" id="game"><canvas id="c1"></canvas></div><div class="cV fading2" id="menu"><div class="cH scrollX" id="inputs"><div class="grow" id="song" song="_">Song...</div><div class="unselbtn" id="se">SE-X</div><div class="unselbtn" id="line">Line-X</div><div id="min">∞min</div><div id="speed" speed="1">Speedx1.0</div></div><div class="grow" id="menubody"><div class="cV fullH fullW scrollY" id="detail"><div class="grow scrollY" id="detailtext"><p>縦に7本レーンがありまして、左から順に、[S] [D] [F] [Space] [J] [K] [L] のキーを押して、落ちてくる譜面を叩いてください。</p><p style="margin-top: 1em">ラインの色には意味があります。<ul style="margin-left: 1em;"><li style="display: block">赤 押すタイミングが早すぎる</li><li style="display: block">黃 ちょうどいい</li><li style="display: block">緑 遅すぎる</li></ul></p><p style="margin-top: 1em">操作方法<ol style="margin-left: 1em"><li>左上[Songs]を押し、曲を選ぶ</li><li>タイトルに[Tap here...]が表示された場合、[Tap here...]を押す</li><li>(Optional) 右上[Speed]を押し、スピードを入れる</li><li>右上[&gt;]を押し、ゲームを開始する</li><li>[Name]を押し、スコアと名前を登録する</li></ol></p></div><p style="text-align: right;">作成者: 二人ほど。</p></div><div class="fullH fullW cV fading2" id="selectsong"><div class="fullW" id="filter"><span id="tags-name">Loading...</span><div class="scrollX mL"><ul class="cW fullW grow" id="tags"></ul></div></div><div class="fullW grow scrollY" id="songs"><ul class="fullW fullH listV" id="songlist"></ul></div></div></div></div></div></div><script>
function d(a){return document.getElementById(a)}
function aa(){d("song").addEventListener("click",function(a){a.preventDefault&&a.preventDefault();f(d("detail"));h(d("selectsong"));m()});d("speed").addEventListener("click",function(a){a.preventDefault&&a.preventDefault();a=parseFloat((prompt("\u697d\u8b5c\u304c\u843d\u3061\u308b\u30b9\u30d4\u30fc\u30c9\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059(0.5~5.0\u500d)...")||"").replace(/[^0-9\.]+/g,""));isNaN(a)||(d("speed").innerText="Speedx"+Math.min(5,Math.max(.5,(10*a<<0)/10)).toFixed(1),d("speed").setAttribute("speed",
""+Math.min(5,Math.max(.5,(10*a<<0)/10))),p())});d("min").addEventListener("click",function(a){a.preventDefault&&a.preventDefault();a=parseFloat((prompt("\u30b2\u30fc\u30e0\u3092\u4f55\u5206\u9593\u3059\u308b\u304b\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059...")||"").replace(/[^0-9\.]+/g,""));isNaN(a)||(q=a=60*(10*Math.max(1,a)<<0)/10*1E3,d("min").innerText=(a/6E4).toFixed(1)+"min")});d("name").addEventListener("click",function(a){a.preventDefault&&a.preventDefault();"_"!=d("name").getAttribute("can")?
alert("\u3082\u3046\u8ffd\u52a0\u6e08\u307f\u3067\u3059\u306e\u3067\u8ffd\u52a0\u3067\u304d\u306a\u3044\u3093\u3067\u3059\u3088\u3002\u307e\u3042\u3001\u8a31\u3057\u3066\u3084\u3063\u3066\u304f\u3060\u3055\u3044"):(a=prompt("\u30e9\u30f3\u30ad\u30f3\u30b0\u3078\u540d\u524d\u3068\u3068\u3082\u306b\u767b\u9332\u3067\u304d\u307e\u3059..."),null!=a&&(d("name").setAttribute("can","#"),d("name").innerText=a+" Adding...",ba(a)))});d("se").addEventListener("click",function(a){a.preventDefault&&a.preventDefault();
r(d("se").classList.contains("unselbtn"))});d("line").addEventListener("click",function(a){a.preventDefault&&a.preventDefault();t(d("line").classList.contains("unselbtn"))});u("songs.js",function(){window.SongList=window.SongList.map(function(a){a.Title+=" Lv."+a.Level;return a});window.SongList=window.SongList.sort(function(a,b){return a.Title<b.Title?-1:a.Title>b.Title?1:0});m();ca()});setTimeout(function(){v()},500)}
function v(){w("Song/Speed",["game","menu"]);d("next").addEventListener("click",function b(c){c.preventDefault&&c.preventDefault();d("next").classList.contains("activebtn")&&(d("next").removeEventListener("click",b),da())});p()}function p(){"_"!=d("song").getAttribute("song")?(ea(d("next")),d("next").classList.add("blink"),x=!1,y=3E3/parseFloat(d("speed").getAttribute("speed")),z(),x=!0):fa(d("next"))}
function ca(){d("tags").innerHTML="";var a={};window.SongList.forEach(function(b){a[b.Level]=1});Object.keys(a).forEach(function(a){var b=document.createElement("li");b.innerText=a;b.addEventListener("click",function(a){a.preventDefault&&a.preventDefault();b.classList.contains("selbtn")?b.classList.remove("selbtn"):b.classList.add("selbtn");m()});d("tags").appendChild(b)});d("tags-name").innerText="Level"}
function m(){function a(a,b){var c=document.createElement("li");c.innerText=a.Title;c.addEventListener("click",function(c){c.preventDefault&&c.preventDefault();d("song").innerText=a.Title;d("song").setAttribute("song",b);p();f(d("selectsong"));h(d("detail"))});d("songlist").appendChild(c)}for(var b=d("tags").children,c=[],e=0;e<b.length;e++){var k=b.item(e);k.classList.contains("selbtn")&&c.push(k.innerText)}d("songlist").innerHTML="";0==c.length?window.SongList.forEach(a):window.SongList.forEach(function(b,
e){c.some(function(a){return a==b.Level})&&a(b,e)})}function da(){w(d("song").innerText,["game","gameback","prev"],function(){x=!1;z()});d("prev").addEventListener("click",A)}function A(a){a.preventDefault&&a.preventDefault();d("prev").removeEventListener("click",A);B.currentTime=B.duration;v()}
function ga(){w("Result "+(1E6*C/D<<0)/1E4+"pt",["fin","prev"]);d("name").setAttribute("can","_");d("name").innerText="Enter your name...";d("prev").removeEventListener("click",A);d("prev").addEventListener("click",function b(c){c.preventDefault&&c.preventDefault();d("prev").removeEventListener("click",b);v()});ha()}var E=[];
function ha(){var a=d("rankinglist");a.innerText="Loading...";ia(function(b){a.innerHTML="";E=b.sort(function(a,b){return b.p-a.p});E.forEach(function(b,e){var c=document.createElement("li");c.innerHTML='<span class="rank">#'+(e+1)+'</span><span class="score">'+b.p/1E4+'pt</span><span class="name">'+b.n+"</span>";a.appendChild(c)})})}
function ba(a){ka(window.SongList[parseInt(d("song").getAttribute("song"),10)].File,{p:1E6*C/D<<0,n:a,t:q},function(){d("name").innerText=a+" Added!";E.push({p:1E6*C/D<<0,n:a,t:q});E=E.sort(function(a,b){return b.p-a.p});var b=d("rankinglist");b.innerHTML="";E.forEach(function(a,e){var c=document.createElement("li");c.innerHTML='<span class="rank">#'+(e+1)+'</span><span class="score">'+a.p/1E4+'pt</span><span class="time">'+(a.t/6E4).toFixed(1)+'min</span><span class="name">'+a.n+"</span>";b.appendChild(c)})})}
function F(a,b){var c=this;this.m=b;if(a.getContext)this.g=a.getContext("2d");else throw"Canvas\u304c\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059";this.i=this.h=1;var e=this;(function(a){var b=!1;window.addEventListener("resize",function(){!1!==b&&clearTimeout(b);b=setTimeout(a,100)})})(function(){return c.v.call(e)});this.v()}
function la(){var a=G,b=H,c=a.g.canvas;a.h=(b||window.devicePixelRatio||1)*a.m.clientWidth;a.i=(b||window.devicePixelRatio||1)*a.m.clientHeight;c.width=a.h<<0;c.height=a.i<<0;a.g.lineWidth=b||window.devicePixelRatio||1;console.log("DPR: "+b+"/"+(window.devicePixelRatio||1))}
F.prototype.v=function(){var a=this.g.canvas;this.h=(window.devicePixelRatio||1)*this.m.clientWidth;this.i=(window.devicePixelRatio||1)*this.m.clientHeight;a.width=this.h<<0;a.height=this.i<<0;a.style.width=this.m.clientWidth+"px";a.style.height=this.m.clientHeight+"px";this.g.lineWidth=window.devicePixelRatio||1};
function I(a){var b=G;b.g.beginPath();a=a();"Fill"in a&&(b.g.fillStyle!=a.Fill&&(b.g.fillStyle=a.Fill),b.g.fill());"Stroke"in a&&(b.g.strokeStyle!=a.Stroke&&(b.g.strokeStyle=a.Stroke),b.g.stroke())}F.prototype.Rect=function(a,b,c,e){this.g.rect(a*this.h<<0,b*this.i<<0,c*this.h<<0,e*this.i<<0)};function ma(a,b){var c=G;c.g.arc(a*c.h<<0,b*c.i<<0,.5/J.length*Math.min(c.h,c.i)<<0,-.5*Math.PI,2*Math.PI)}var K=[83,68,70,32,74,75,76],na=[87,69,82,66,85,73,79],L=1,B=new Audio,M=[],N=!1;
function r(a){if(N=a){if(d("se").classList.remove("unselbtn"),d("se").classList.add("selbtn"),d("se").innerText="SE-O",0==M.length)for(M=[],a=0;50>a;a++){var b=new Audio("Tap.mp3");b.w="auto";M.push(b)}}else d("se").classList.add("unselbtn"),d("se").classList.remove("selbtn"),d("se").innerText="SE-X"}
function t(a){a?(d("line").classList.remove("unselbtn"),d("line").classList.add("selbtn"),d("line").innerText="Line-O"):(d("line").classList.add("unselbtn"),d("line").classList.remove("selbtn"),d("line").innerText="Line-X")}var O=!1,G=void 0,J=[{l:0,j:0,b:[{a:[],f:{c:!1}}]}],P=!1,x=!1,oa="",Q=0,q=Infinity,y=5E3,D=0,C=0;function R(a){C=a;d("score").innerText=(1E6*a/D<<0)/1E4+"pt\n"+S+"combo"}var T=0,S=0;
function z(){J=void 0;J=[];K.forEach(function(){return J.push({l:0,j:0,b:[]})});x&&window.SongList[parseInt(d("song").getAttribute("song"),10)].Music==oa||(oa=window.SongList[parseInt(d("song").getAttribute("song"),10)].Music,B.src="musics/"+window.SongList[parseInt(d("song").getAttribute("song"),10)].Music);u("datas/"+window.SongList[parseInt(d("song").getAttribute("song"),10)].File+".js",function(){B.currentTime=0;O&&(B.playbackRate=1);R(0);S=0;Q=Infinity;window.NodeText.split(" ").forEach(function(a){a=
a.split(":").map(function(a){return parseInt(a,10)});switch(a.length){case 1:P||(Q=a[0]);break;case 2:J[a[0]].b.push({a:a.slice(1),f:{c:!1}});break;case 3:J[a[0]].b.push({a:a.slice(1),f:{c:!1,u:!1}})}});Q>q&&(Q=q,J.forEach(function(a){a.b=a.b.filter(function(a){return a.a[0]<Q})}));window.NodeText="";D=0;J.forEach(function(a){a.b.forEach(function(a){D+=a.a.length})});D=5>D?D*(D+1)/2:5*D-10;D*=1E3;J.forEach(function(a){a.b=a.b.sort(function(a,b){return a.a[0]-b.a[0]})});B.play();if(B.paused){var a=
d("title").innerText;pa("Tap here!");d("title").addEventListener("click",function e(b){b.preventDefault&&b.preventDefault();d("title").innerText="loading...";B.play();d("title").removeEventListener("click",e);B.addEventListener("loadeddata",function l(){d("title").innerText=a;B.removeEventListener("loadeddata",l)})})}else{var b=d("title").innerText;d("title").innerText="loading...";B.play();B.addEventListener("loadeddata",function e(){d("title").innerText=b;B.removeEventListener("loadeddata",e)})}0==
T&&(T++,qa())})}
function qa(){if(1<T)T--;else if(1E3*B.currentTime>Q&&d("fin").classList.contains("fading2"))T--,x?z():ga();else{ra();var a=1E3*B.currentTime;G.g.clearRect(0,0,G.h,G.i);G.g.globalCompositeOperation="lighter";J.forEach(function(b,c){b.j*=.95;b.l*=.95;var e="hsl("+(60*b.l+60)+","+(100*Math.min(.8,b.j)+20)+"%,"+(25*Math.min(.4,b.j)+50)+"%)",k="hsl("+(60*b.l+60)+","+(100*Math.min(.8,b.j)+10)+"%,"+(25*Math.min(.4,b.j)+50)+"%)",g=1/J.length*(c+.5),l=.5/J.length*(G.h>G.i?1:G.h/G.i);I(function(){var a=.8-
l,b=G;b.g.moveTo(g*b.h<<0,0*b.i<<0);b.g.lineTo(g*b.h<<0,a*b.i<<0);ma(g,.8);return{Stroke:e}});b.b.some(function(c){switch(c.a.length){case 1:var e=Math.pow(1-(c.a[0]-a)/y,5)*(.8+l)-l;if(e<-l)return!P;if(e>1+l)break;.8<e&&x&&!c.f.c&&(c.f.c=!0,N&&U(),b.j=1);I(function(){ma(g,e);return c.f.c?{Stroke:k}:{Fill:k}});break;case 2:var ja=Math.pow(1-(c.a[0]-a)/y,5)*(.8+l)-l,n=Math.pow(1-(c.a[1]-a)/y,5)*(.8+l)-l;if(ja<-l)return!P;n>1+l||(.8<n&&x&&!c.f.c&&(c.f.c=!0,N&&U(),b.j=1),I(function(){var a=ja-n,b=G,
e=.5/J.length;b.g.arc(g*b.h<<0,n*b.i<<0,e*Math.min(b.h,b.i)<<0,-Math.PI,0);b.g.arc(g*b.h<<0,(n+a)*b.i<<0,e*Math.min(b.h,b.i)<<0,0,-Math.PI);return c.f.c?{Stroke:k}:{Fill:k}}))}return!1})});requestAnimationFrame(qa)}}
function V(a,b,c){if(!x){var e=1E3*B.currentTime;if(78==b)a||B.pause();else if(77==b)a||B.play();else if(P||!B.paused){var k=K.some(function(k,g){var l,n;if(k==b){if(P&&c.s)a||(l=-1,n=Infinity,J[0].b.forEach(function(a,b){a.f.c&&1==a.a.length&&Math.abs(e-a.a[0])<Math.abs(n)&&(l=b,n=e-a.a[0])}),0<=l&&(J[g].b.push({a:[J[0].b[l].a[0]],f:{c:!1}}),c.o&&J[0].b.splice(l,1)));else if(P&&!c.o)a||J[g].b.push({a:[e<<0],f:{c:!1}});else if(l=-1,n=Infinity,J[g].b.forEach(function(b,c){var g=Infinity;switch(b.a.length){case 1:a||
b.f.c||(g=e-b.a[0]);break;case 2:a&&b.f.u?g=e-b.a[1]:a||b.f.u||(g=e-b.a[0])}Math.abs(g)<Math.abs(n)&&(l=c,n=g)}),P)0<=l&&!a&&J[g].b.splice(l,1);else if(0<=l&&200>Math.abs(n)){switch(J[g].b[l].a.length){case 1:J[g].b[l].f.c=!0;case 2:a?J[g].b[l].f.c=!0:J[g].b[l].f.u=!0}J[g].l=Math.sign(Math.sign(n)*(Math.max(Math.abs(n),50)-50));J[g].j=1;S++;R(C+Math.min(S+1,5)*((1/Math.pow((Math.max(Math.abs(n),50)-50)/150*.5+.5,2)-1)/3*500+500)<<0);O&&(0>J[g].l?L+=.02:0<J[g].l&&(L-=.02),L=Math.min(1.5,Math.max(.5,
L)),B.playbackRate=Math.min(1.5,Math.max(.5,B.playbackRate-(B.playbackRate-L)/10)))}else a||(S=0,R(C+-100));return!0}});if(P&&!k&&(k=na.some(function(c,g){if(c==b)return a?J[g].b[W[g]].a[1]=e<<0:(J[g].b.push({a:[e<<0,e+1E4<<0],f:{c:!1,u:!1}}),W[g]=J[g].b.length-1),!0}),!k)){if(a)return;if(c.o){var g=-1,l=Infinity;J[0].b.forEach(function(a,b){a.f.c&&1==a.a.length&&Math.abs(e-a.a[0])<Math.abs(l)&&(g=b,l=e-a.a[0])});0<=g&&J[0].b.splice(g,1)}else J[0].b.push({a:[e<<0],f:{c:!0}});k=!0}N&&k&&!a&&U()}}}
function sa(){M=[];B=new Audio;B.w="auto";B.onended=function(){B.currentTime=0;x?z():ga()};G=new F(d("c1"),d("game"));X.c=[];W=Array(na.length);K.forEach(function(a){return X.c[a]=!1});document.onkeydown=function(a){a||(a=window.event);if(P)switch(a.keyCode){case 13:Q=1E3*B.currentTime;console.log("--DATA--");var b=[];J.forEach(function(a,e){var c=[];a.b.sort(function(a,b){return a.a[0]-b.a[0]}).forEach(function(a){a.f.c||c.push(e+":"+a.a.join(":"))});b.push(c.join(" "))});b.push(Q);console.log('NodeText = "'+
b.join(" ")+'";');return;case 67:B.playbackRate=Math.min(4,Math.max(.2,B.playbackRate-.05));console.log("Speed: "+B.playbackRate);return;case 86:B.playbackRate=Math.min(4,Math.max(.2,B.playbackRate+.05));console.log("Speed: "+B.playbackRate);return;case 90:B.currentTime=Math.max(0,B.currentTime-.5);console.log("Time: "+B.currentTime);return;case 88:B.currentTime=Math.max(0,B.currentTime+.5);console.log("Time: "+B.currentTime);return}if(!X[a.keyCode]&&(X[a.keyCode]=!0,V(!1,a.keyCode,{o:a.shiftKey,
s:a.ctrlKey}),P&&(a.shiftKey||a.ctrlKey)))if(a.preventDefault)a.preventDefault();else return a.keyCode=0,!1};document.onkeyup=function(a){a||(a=window.event);if(X[a.keyCode]&&(X[a.keyCode]=!1,V(!0,a.keyCode,{o:a.shiftKey,s:a.ctrlKey}),P&&(a.shiftKey||a.ctrlKey)))if(a.preventDefault)a.preventDefault();else return a.keyCode=0,!1};G.g.canvas.addEventListener("touchstart",function(a){a.preventDefault();a||(a=window.event);for(var b=0;b<a.changedTouches.length;b++)V(!1,K[a.changedTouches.item(b).clientX/
(G.m.clientWidth/K.length)<<0],{o:!1,s:!1})});G.g.canvas.addEventListener("touchend",function(a){a.preventDefault();a||(a=window.event);for(var b=0;b<a.changedTouches.length;b++)V(!0,K[a.changedTouches.item(b).clientX/(G.m.clientWidth/K.length)<<0],{o:!1,s:!1})})}function U(){for(var a=0;a<M.length;a++)if(M[a].paused){M[a].play();return}console.warn("Need more SE")}
var X={c:{}},W=[],ta=[function(a){return 50>a?console.log("FPS<50 "+a):0},function(a){40>a&&.5<H&&(H*=.8,H=Math.min(window.devicePixelRatio||1,Math.max(window.devicePixelRatio/3,H)),la());55<a&&H<(window.devicePixelRatio||1)&&(H+=((window.devicePixelRatio||1)-H)/3+.2,H=Math.min(window.devicePixelRatio||1,Math.max(window.devicePixelRatio/3,H)),la())}],H=window.devicePixelRatio||1,Y=0,Z=-1,ua=60;
function ra(){0>Z&&(Y=performance.now());Z++;if(0==Z%300){var a=performance.now();Z=0;ua=1E3/(a-Y)*300<<0;Y=a;ta.forEach(function(a){return a(ua)})}}
function pa(a){var b;b=b||function(){return 0};var c=d("title");c.addEventListener("webkitAnimationEnd",function k(){c.classList.contains("fading1")?(c.innerText=a,c.classList.remove("fading1"),c.classList.add("fading2"),setTimeout(function(){c.classList.remove("fading2");c.classList.add("fading3")},0)):(c.classList.remove("fading3"),c.removeEventListener("webkitAnimationEnd",k),b())});c.classList.add("fading1")}
function f(a,b){b=b||function(){return 0};a.classList.contains("fading2")?b():(a.addEventListener("webkitAnimationEnd",function e(){a.classList.remove("fading1");a.classList.add("fading2");a.removeEventListener("webkitAnimationEnd",e);b()}),a.classList.add("fading1"))}
function h(a,b){b=b||function(){return 0};a.classList.contains("fading2")?(a.addEventListener("webkitAnimationEnd",function e(){a.classList.remove("fading3");a.removeEventListener("webkitAnimationEnd",e);b()}),a.classList.remove("fading2"),a.classList.add("fading3")):b()}function ea(a){a.classList.remove("deactivebtn");a.classList.add("activebtn")}function fa(a){a.classList.remove("activebtn");a.classList.add("deactivebtn")}
function w(a,b,c){function e(){k++;4==k&&c()}pa(a||"");c=c||function(){return 0};var k=0;["menu","game","gameback","fin"].forEach(function(a){0>b.indexOf(a)?f(d(a),e):h(d(a),e)});["prev","next"].forEach(function(a){0>b.indexOf(a)?fa(d(a)):ea(d(a))});["next"].forEach(function(a){0>b.indexOf(a+"-Blink")?d(a).classList.remove("blink"):d(a).classList.add("blink")})}
function u(a,b){var c=!1,e=document.getElementsByTagName("head")[0],k=document.createElement("script");k.src=a;e.appendChild(k);k.onload=k.onreadystatechange=function(){c||k.readyState&&"loaded"!==k.readyState&&"complete"!==k.readyState||(c=!0,b(),k.onload=k.onreadystatechange=null,e&&k.parentNode&&e.removeChild(k))}}function va(){var a={};location.search.substring(1).split("&").forEach(function(b){b=b.split("=");a[b[0]]=b[1]});return a}
function wa(){var a=new Date;return a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()}var xa=[];
function ia(a){var b=window.SongList[parseInt(d("song").getAttribute("song"),10)].File;u("https://script.google.com/macros/s/AKfycbz1JaRk2i_VtBEmFUyyMecyg04kEi2ccXn9rVNxiKQjCufpWlWA/exec?type=GetTitle&prefix=MyStorage.LoadedTitleList",function(){var c=(void 0).findIndex(function(a){return a==b});0>c?a([]):u("https://script.google.com/macros/s/AKfycbz1JaRk2i_VtBEmFUyyMecyg04kEi2ccXn9rVNxiKQjCufpWlWA/exec?ID="+c+"&prefix=MyStorage.LoadedRankList",function(){a(xa)})})}
function ka(a,b,c){u("https://script.google.com/macros/s/AKfycbz1JaRk2i_VtBEmFUyyMecyg04kEi2ccXn9rVNxiKQjCufpWlWA/exec?type=GetTitle&prefix=MyStorage.LoadedTitleList",function(){var e=(void 0).findIndex(function(b){return b==a});0>e?u("https://script.google.com/macros/s/AKfycbz1JaRk2i_VtBEmFUyyMecyg04kEi2ccXn9rVNxiKQjCufpWlWA/exec?type=AddTitle&Title="+encodeURIComponent(a)+"&Text="+encodeURIComponent(JSON.stringify(b)),function(){c()}):u("https://script.google.com/macros/s/AKfycbz1JaRk2i_VtBEmFUyyMecyg04kEi2ccXn9rVNxiKQjCufpWlWA/exec?type=AddRank&ID="+
e+"&Text="+encodeURIComponent(JSON.stringify(b)),function(){c()})})}window.performance=window.performance||{};window.performance.now=window.performance.now||function(){return(new Date).getTime()};window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;
window.addEventListener("load",function(){try{document.documentElement.requestFullscreen()}catch(b){}var a=va();P="making"in a;r("se"in a);t("line"in a);"speed"in a&&(y=a.speed);O="fit"in a;sa();aa();u("https://script.google.com/macros/s/AKfycbz1JaRk2i_VtBEmFUyyMecyg04kEi2ccXn9rVNxiKQjCufpWlWA/exec?type=AddRank&ID=-2&Text="+encodeURIComponent(wa()+" "+window.navigator.userAgent),function(){return 0})});</script></body></html>